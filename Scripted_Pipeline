node('master') {
 stage('Source') {
  git 'https://github.com/BINPIPE/scripted-and-declarative-pipeline-demo.git'
 }
 try {
 stage('Build') {
  sh 'docker build -t flask-app:latest .'
 }
 stage('Test') {
  sh 'python3 test.py'
  }
} catch (e) {
postToSlack.postToChannel env.JOB_NAME, env.BUILD_URL, currentBuild.currentResult, "licensescheck", ""

} finally {
     stage('Post-run auditing') {
        build job: 'helloworld'
        }
    }
}
