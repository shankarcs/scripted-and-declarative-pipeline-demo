node('master') {
 stage('Source') {
  git 'https://github.com/BINPIPE/scripted-and-declarative-pipeline-demo.git'
 }
 try {
 stage('Build') {
  sh 'docker build -t flask-app:latest .'
 }
 stage('Test') {
  sh 'python3 test.py'
  }
} catch (e) {
        // fail the build if an exception is thrown
        currentBuild.result = "FAILURE"
        slackSend channel: 'licensescheck',env.JOB_NAME, env.BUILD_URL, currentBuild.currentResult
}
if (currentBuild.result != "FAILURE") {
stage('Post Build') {
   build job: 'helloworld'
}
}
}
